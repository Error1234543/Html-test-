<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KRIVA Test Selection</title>

<style>
    body { font-family: Poppins, sans-serif; background:#f1f3ff; padding:20px; }
    .folder, .test {
        background:white; padding:15px; margin:8px 0;
        border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1);
        cursor:pointer; font-size:18px;
    }
    .folder:hover, .test:hover { background:#4b6bff; color:white; }
    #testList { margin-top:20px; }
</style>

</head>
<body>

<h2>üìÅ Select Test Category</h2>
<div id="folderList"></div>

<h2 id="selectedFolder"></h2>
<div id="testList"></div>

<script>
fetch("manifest.json")
  .then(res => res.json())
  .then(data => {
      window.testManifest = data;
      loadFolders(data);
  });

// show folders
function loadFolders(data) {
    let html = "";
    Object.keys(data).forEach(folder => {
        html += `<div class="folder" onclick="openFolder('${folder}')">${folder}</div>`;
    });
    document.getElementById("folderList").innerHTML = html;
}

// show tests inside folder
function openFolder(folderName) {
    document.getElementById("selectedFolder").innerText = folderName + " Tests";
    let tests = window.testManifest[folderName];

    let html = "";
    tests.forEach((testPath, i) => {
        html += `<div class="test" onclick="openTest('${testPath}')">Test ${i+1}</div>`;
    });

    document.getElementById("testList").innerHTML = html;
}

// open quiz.html with data.json
function openTest(path) {
    window.location.href = "quiz.html?test=" + path;
}
</script>

</body>
</html>