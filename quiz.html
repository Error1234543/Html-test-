<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KRIVA Quiz</title>
<style>
  body { font-family: Poppins, sans-serif; background: #f1f3ff; margin:0; padding:20px; }
  h1 { text-align:center; color:#333; }
  #syllabusList { margin-bottom:20px; padding-left:20px; }
  .question { margin-bottom:20px; padding:10px; background:#fff; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
  .question img { max-width:100%; margin:10px 0; }
  .options { list-style:none; padding:0; }
  .options li { margin:5px 0; }
  .submit-btn { display:block; margin:20px auto; padding:10px 20px; font-size:16px; background:#4CAF50; color:#fff; border:none; border-radius:5px; cursor:pointer; }
  .submit-btn:hover { background:#45a049; }
  #result { margin-top:20px; font-size:18px; font-weight:bold; text-align:center; }
</style>
</head>
<body>

<h1 id="testTitle">Loading Test...</h1>

<h2>Syllabus</h2>
<ul id="syllabusList"></ul>

<div id="questionsContainer"></div>

<button class="submit-btn" onclick="calculateResult()">Submit</button>

<div id="result"></div>

<script>
let quizData = {};
let userAnswers = {};

async function loadQuiz() {
  const res = await fetch("tests/TEST1/data.json");
  quizData = await res.json();

  document.getElementById("testTitle").innerText = quizData.title;

  // Load syllabus
  const syllabusList = document.getElementById("syllabusList");
  quizData.syllabus.forEach(chap => {
    const li = document.createElement("li");
    li.innerText = chap;
    syllabusList.appendChild(li);
  });

  // Load questions
  const container = document.getElementById("questionsContainer");
  quizData.questions.forEach(q => {
    const qDiv = document.createElement("div");
    qDiv.className = "question";
    qDiv.innerHTML = `
      <p><b>Q${q.number}:</b></p>
      ${q.image ? `<img src="${q.image}" alt="Question ${q.number}">` : ""}
      <ul class="options">
        <li><input type="radio" name="q${q.number}" value="A"> Option A</li>
        <li><input type="radio" name="q${q.number}" value="B"> Option B</li>
        <li><input type="radio" name="q${q.number}" value="C"> Option C</li>
        <li><input type="radio" name="q${q.number}" value="D"> Option D</li>
      </ul>
    `;
    container.appendChild(qDiv);
  });
}

function calculateResult() {
  let correct = 0;
  let wrong = 0;

  quizData.questions.forEach(q => {
    const radios = document.getElementsByName("q" + q.number);
    let answered = false;
    radios.forEach(r => {
      if (r.checked) {
        answered = true;
        if (q.answer && r.value === q.answer) {
          correct++;
        } else {
          wrong++;
        }
      }
    });
    if (!answered) wrong++;
  });

  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = `Correct: ${correct} | Wrong: ${wrong}`;
}

loadQuiz();
</script>

</body>
</html>