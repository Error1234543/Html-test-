<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KRIVA Ultra Pro Max Quiz</title>

    <style>
        body {
            font-family: Poppins, sans-serif;
            background: #eef2ff;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 900px;
            margin: auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .syllabus-box {
            background: white;
            padding: 15px;
            border-radius: 14px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.10);
            margin-bottom: 20px;
        }

        .syllabus-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .question-box {
            background: white;
            padding: 15px;
            border-radius: 14px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.10);
        }

        .question-number {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .question-box img {
            width: 100%;
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .option {
            padding: 12px;
            margin: 8px 0;
            background: #f7f7ff;
            border-radius: 10px;
            cursor: pointer;
            font-size: 15px;
            border: 2px solid transparent;
        }

        .option.selected {
            border: 2px solid #333;
            background: #e0e0ff;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: none;
            border-radius: 12px;
            background: #4b4bff;
            color: white;
            cursor: pointer;
            margin-top: 20px;
            font-weight: 600;
        }

        .result-box {
            background: white;
            padding: 20px;
            border-radius: 14px;
            margin-top: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.10);
        }

        .correct { color: green; font-weight: 600; }
        .wrong { color: red; font-weight: 600; }
    </style>

</head>
<body>

<div class="container">
    <h1 id="testTitle">Loading...</h1>

    <!-- Syllabus -->
    <div id="syllabusBox" class="syllabus-box"></div>

    <!-- Questions -->
    <div id="questions"></div>

    <button class="submit-btn" onclick="showResult()">Submit Test</button>

    <!-- Result -->
    <div id="result" class="result-box" style="display:none;"></div>
</div>

<script>
    // Auto-load JSON (same folder /data.json)
    fetch("data.json")
        .then(res => res.json())
        .then(data => {
            loadTest(data);
        });

    let userAnswers = {};

    function loadTest(data) {

        document.getElementById("testTitle").innerText = data.title;

        // ---------------------------
        // SYLLABUS LOAD
        // ---------------------------
        let s = data.syllabus;
        let syllabusHTML = `
            <div class='syllabus-title'>ðŸ“˜ Syllabus</div>
            <b>Chemistry (${s.chemistry.standard}) :</b> ${s.chemistry.chapters.join(", ")}<br>
            <b>Biology (${s.biology.standard}) :</b> ${s.biology.chapters.join(", ")}<br>
            <b>Part A (${s.part_a.standard}) :</b> ${s.part_a.chapters.join(", ")}
        `;
        document.getElementById("syllabusBox").innerHTML = syllabusHTML;

        // ---------------------------
        // QUESTIONS LOAD
        // ---------------------------
        let qBox = document.getElementById("questions");
        qBox.innerHTML = "";

        data.questions.forEach(q => {
            let qHTML = `
                <div class="question-box">
                    <div class="question-number">Question ${q.number}</div>
                    ${q.image ? `<img src="${q.image}">` : ""}
                    
                    <div class="option" onclick="selectOption(${q.number}, 'A')">A</div>
                    <div class="option" onclick="selectOption(${q.number}, 'B')">B</div>
                    <div class="option" onclick="selectOption(${q.number}, 'C')">C</div>
                    <div class="option" onclick="selectOption(${q.number}, 'D')">D</div>
                </div>
            `;
            qBox.innerHTML += qHTML;
        });
    }

    // ---------------------------
    // OPTION SELECT
    // ---------------------------
    function selectOption(qNo, option) {
        userAnswers[qNo] = option;

        let questionBox = document.querySelectorAll(".question-box")[qNo - 1];
        questionBox.querySelectorAll(".option").forEach(opt => opt.classList.remove("selected"));

        questionBox.querySelectorAll(".option").forEach(opt => {
            if (opt.innerText === option) {
                opt.classList.add("selected");
            }
        });
    }

    // ---------------------------
    // RESULT
    // ---------------------------
    function showResult() {

        fetch("data.json")
            .then(res => res.json())
            .then(data => {
                let correct = 0, wrong = 0;

                let details = "";

                data.questions.forEach(q => {
                    let userAns = userAnswers[q.number] || "â€”";
                    let realAns = q.answer || "â€”";

                    if (userAns === realAns) correct++;
                    else wrong++;

                    details += `
                        Q${q.number}: 
                        Your Ans: <b class="${userAns === realAns ? 'correct' : 'wrong'}">${userAns}</b> 
                        | Correct: <b>${realAns}</b><br>
                    `;
                });

                document.getElementById("result").style.display = "block";
                document.getElementById("result").innerHTML = `
                    <h2>Result</h2>
                    <p>Correct: <b class='correct'>${correct}</b></p>
                    <p>Wrong: <b class='wrong'>${wrong}</b></p>
                    <hr>
                    ${details}
                `;
                window.scrollTo(0, document.body.scrollHeight);
            });
    }
</script>

</body>
</html>